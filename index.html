<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JET GO ALERT</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="js/main.js"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_NEW_API_KEY&callback=initMap"></script>
    <style>
        #map { height: 400px; width: 100%; }
    </style>                                                                                    
</head>
<body>
    <header>
        <h1>JET GO ALERT</h1>
        <button id="darkModeToggle">Toggle Dark Mode</button>
    </header>

    <main>
        <section id="alerts">
            <h2>Earthquake Alerts</h2>
            <div id="alert-container">Loading earthquake data...</div>
        </section>

        <section id="quake-map">
            <h2>Earthquake Map</h2>
            <div id="map"></div>
        </section>

        <section id="reports">
            <h2>User Reports</h2>
            <textarea id="user-report" placeholder="Describe your experience..."></textarea>
            <button onclick="submitReport()">Submit</button>
            <div id="report-list"></div>
        </section>
    </main>

    <!-- Leaflet JS for Maps -->
    <script>
        var map = L.map('map').setView([14.5995, 120.9842], 6);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);
    </script>

    <!-- Load Earthquake Data -->
    <script defer src="js/earthquake.js"></script>

   <script>
    async function fetchEarthquakeData() {
        try {
            const response = await fetch('https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_day.geojson');
            const data = await response.json();

            const earthquakes = data.features.filter(eq => eq.properties.place.includes('Philippines'));

            let alertContainer = document.getElementById("alert-container");
            alertContainer.innerHTML = "";

            earthquakes.forEach(eq => {
                const { mag, place, time } = eq.properties;
                const date = new Date(time).toLocaleString();
                alertContainer.innerHTML += `<p><strong>${date}</strong>: M${mag} - ${place}</p>`;

                L.marker([eq.geometry.coordinates[1], eq.geometry.coordinates[0]])
                    .addTo(map)
                    .bindPopup(`<b>${place}</b><br>Magnitude: ${mag}<br>${date}`);
            });

        } catch (error) {
            console.error("Error fetching earthquake data:", error);
        }
    }

    fetchEarthquakeData(); // Load initially
    setInterval(fetchEarthquakeData, 120000); // Refresh every 2 minutes
</script>

    <footer>
        <p>JET GO ALERT &copy; 2025</p>
    </footer>
    
<script defer src="js/reports.js"></script>

</body>
</html>
